<div class="p-6 bg-white dark:bg-gray-900 dark:text-white rounded-xl shadow-2">

  <!-- ====== Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØªÙ‚Ø±ÙŠØ± ====== -->
  <h2 class="text-center text-2xl font-bold mb-6 text-blue-700 border-b-4 border-blue-300 pb-2">
    ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø­Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
  </h2>

  <!-- ====== Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ù„Ø®Øµ ====== -->
  <div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
    <div class="p-4 bg-green-100 dark:bg-green-800 rounded-lg shadow-sm flex flex-col items-center">
      <i class="pi pi-arrow-down text-green-600 text-2xl"></i>
      <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†</span>
      <strong>{{ totalDebit | number:'1.2-2' }}</strong>
    </div>
    <div class="p-4 bg-red-100 dark:bg-red-800 rounded-lg shadow-sm flex flex-col items-center">
      <i class="pi pi-arrow-up text-red-600 text-2xl"></i>
      <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø§Ø¦Ù†</span>
      <strong>{{ totalCredit | number:'1.2-2' }}</strong>
    </div>
    <div class="p-4 bg-blue-100 dark:bg-blue-800 rounded-lg shadow-sm flex flex-col items-center">
      <i class="pi pi-wallet text-blue-600 text-2xl"></i>
      <span>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</span>
      <strong>{{ finalBalance | number:'1.2-2' }}</strong>
    </div>
    <div class="p-4 bg-yellow-100 dark:bg-yellow-800 rounded-lg shadow-sm flex flex-col items-center">
      <i class="pi pi-chart-line text-yellow-600 text-2xl"></i>
      <span>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø­Ø±ÙƒØ©</span>
      <strong>{{ avgTransaction | number:'1.2-2' }}</strong>
    </div>
    <div class="p-4 bg-purple-100 dark:bg-purple-800 rounded-lg shadow-sm flex flex-col items-center">
      <i class="pi pi-list text-purple-600 text-2xl"></i>
      <span>Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø±ÙƒØ§Øª</span>
      <strong>{{ filteredTransactions.length }}</strong>
    </div>
  </div>

  <!-- ====== ÙÙ„Ø§ØªØ± Ø§Ù„ØªÙ‚Ø±ÙŠØ± ====== -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">

    <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex flex-col gap-4">
      <div class="flex gap-4">
        <div class="flex-1">
          <label class="font-semibold mb-1 block">Ù…Ù† ØªØ§Ø±ÙŠØ®</label>
          <p-datepicker [(ngModel)]="filterData.startDate" dateFormat="yy-mm-dd" showIcon="true"
                        [showButtonBar]="true" placeholder="Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ®" class="w-full"></p-datepicker>
        </div>
        <div class="flex-1">
          <label class="font-semibold mb-1 block">Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®</label>
          <p-datepicker [(ngModel)]="filterData.endDate" dateFormat="yy-mm-dd" showIcon="true"
                        [showButtonBar]="true" placeholder="Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ®" class="w-full"></p-datepicker>
        </div>
      </div>
      <div>
        <label class="font-semibold mb-1 block">Ù…Ø±ÙƒØ² Ø§Ù„ØªÙƒÙ„ÙØ©</label>
        <p-select [(ngModel)]="filterData.costCenter" [options]="costCenters"
                  optionLabel="label" optionValue="value" placeholder="Ø§Ø®ØªØ± Ù…Ø±ÙƒØ² Ø§Ù„ØªÙƒÙ„ÙØ©" class="w-full"></p-select>
      </div>
      <div>
        <label class="font-semibold mb-1 block">Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</label>
        <input pInputText [(ngModel)]="filterData.project" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹" class="w-full" />
      </div>
      <div>
        <label class="font-semibold mb-1 block">Ø§Ù„Ø¹Ù…Ù„Ø©</label>
        <p-select [(ngModel)]="filterData.currency" [options]="currencies"
                  optionLabel="label" optionValue="value" placeholder="Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø©" class="w-full"></p-select>
      </div>
    </div>

    <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm flex flex-col gap-4">
      <div>
        <label class="font-semibold mb-1 block">Ù†ÙˆØ¹ Ø§Ù„Ø­Ø±ÙƒØ©</label>
        <p-select [(ngModel)]="filterData.transactionType" [options]="transactionTypes"
                  optionLabel="label" optionValue="value" placeholder="Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø­Ø±ÙƒØ©" class="w-full"></p-select>
      </div>
      <div>
        <label class="font-semibold mb-1 block">Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨</label>
        <input pInputText [(ngModel)]="filterData.accountNumber" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨" class="w-full" />
      </div>
      <div>
        <label class="font-semibold mb-1 block">Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</label>
        <p-select [(ngModel)]="filterData.financialYear" [options]="financialYears"
                  optionLabel="label" optionValue="value" placeholder="Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†Ø©" class="w-full"></p-select>
      </div>
    </div>

  </div>

  <!-- ====== Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ====== -->
 <p-table #dt [value]="filteredTransactions" dataKey="id" [rows]="10" [loading]="loading"
         [rowHover]="true" [showGridlines]="true" [paginator]="true"
         [globalFilterFields]="['accountNumber', 'accountName', 'type']"
         responsiveLayout="scroll" class="rounded-lg overflow-hidden shadow-sm"
         (onRowSelect)="onRowSelect($event.data)">



    <ng-template #caption>
      <div class="flex flex-col sm:flex-row justify-between items-center mb-4 gap-2">
        <p-inputgroup class="sm:ml-auto w-full sm:w-auto">
          <input pInputText type="text" placeholder="Ø¨Ø­Ø« Ø¹Ø§Ù…..." class="p-input-outlined h-14"
                 (input)="onGlobalFilter($event)" />
          <button pButton icon="pi pi-times" class="p-button-outlined" (click)="clearFilters()"></button>
          <p-button label="Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±" icon="pi pi-search" iconPos="right" (click)="filterReport()"
                    severity="info" class="flex-2"></p-button>
        </p-inputgroup>
      </div>
    </ng-template>

    <ng-template #header>
      <tr>
        <th>Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨</th>
        <th>Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨</th>
        <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
        <th>Ù†ÙˆØ¹ Ø§Ù„Ø­Ø±ÙƒØ©</th>
        <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
        <th>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ</th>
      </tr>
    </ng-template>

    <ng-template #body let-tx>
      <tr [ngClass]="{
            'bg-green-50 dark:bg-green-900': tx.type==='Ù…Ø¯ÙŠÙ†',
            'bg-red-50 dark:bg-red-900': tx.type==='Ø¯Ø§Ø¦Ù†'
          }" class="hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
        <td>{{ tx.accountNumber }}</td>
        <td>{{ tx.accountName }}</td>
        <td>{{ tx.date | date:'yyyy-MM-dd' }}</td>
        <td>
          <p-tag [value]="tx.type" [severity]="tx.type === 'Ù…Ø¯ÙŠÙ†' ? 'success' : 'danger'"></p-tag>
        </td>
        <td [ngClass]="{'text-red-600 font-bold': tx.amount > 1000}">{{ tx.amount | number:'1.2-2' }}</td>
        <td>{{ tx.balance | number:'1.2-2' }}</td>
      </tr>
    </ng-template>

    <ng-template #emptymessage>
      <tr>
        <td colspan="6" class="text-center py-4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</td>
      </tr>
    </ng-template>
  </p-table>

  <!-- ====== Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµØ¯ÙŠØ± ====== -->
  <div class="flex flex-wrap justify-end gap-3 mt-4">
    <button pButton label="PDF" icon="pi pi-file-pdf" class="p-button-danger" (click)="exportToPDF()"></button>
    <button pButton label="Excel" icon="pi pi-file-excel" class="p-button-success" (click)="exportExcel()"></button>
    <button pButton label="CSV" icon="pi pi-file" class="p-button-warning" (click)="exportCSV()"></button>
  </div>

  <!-- ====== Dialog Ù„Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ© ====== -->
  <p-dialog header="ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ©" [(visible)]="displayDialog" [modal]="true" [closable]="true" [style]="{width:'400px'}">
    <div *ngIf="selectedTransaction">
      <p><strong>Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨:</strong> {{selectedTransaction.accountNumber}}</p>
      <p><strong>Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨:</strong> {{selectedTransaction.accountName}}</p>
      <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> {{selectedTransaction.date | date:'yyyy-MM-dd'}}</p>
      <p><strong>Ù†ÙˆØ¹ Ø§Ù„Ø­Ø±ÙƒØ©:</strong> {{selectedTransaction.type}}</p>
      <p><strong>Ø§Ù„Ù…Ø¨Ù„Øº:</strong> {{selectedTransaction.amount | number:'1.2-2'}}</p>
      <p><strong>Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ:</strong> {{selectedTransaction.balance | number:'1.2-2'}}</p>
      <p><strong>Ù…Ø±ÙƒØ² Ø§Ù„ØªÙƒÙ„ÙØ©:</strong> {{selectedTransaction.costCenter}}</p>
      <p><strong>Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:</strong> {{selectedTransaction.project}}</p>
      <p><strong>Ø§Ù„ÙˆØµÙ:</strong> {{selectedTransaction.description}}</p>
      <p><strong>Ø§Ù„Ø¹Ù…Ù„Ø©:</strong> {{selectedTransaction.currency}}</p>
    </div>
  </p-dialog>

</div>
