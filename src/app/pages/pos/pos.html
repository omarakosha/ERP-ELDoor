<div class="card p-5">

  <!-- ๐ ุดุฑูุท ุงูุจุญุซ ู ุฒุฑ ุงูุฅุถุงูุฉ -->
  <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
    <div class="flex items-center w-full md:w-1/2 rounded-xl px-4 py-2 border border-gray-200">
      <i class="pi pi-search text-gray-400 mr-2"></i>
      <input
        type="text"
        pInputText
        placeholder="ุงุจุญุซ ุจุฅุณู ุงููููุน ุฃู ุงุณู ุตูุฏูู ุงูุจูุน..."
        class="w-full outline-none border-0"
        [(ngModel)]="searchQuery"
        (input)="filterPosList()"
      />
    </div>

    <button
      pButton
      label="ุฅุถุงูุฉ ุตูุฏูู ุฌุฏูุฏ"
      icon="pi pi-plus"
      class="p-button-success p-3 rounded-xl shadow-md"
      (click)="openAddDialog()"
    ></button>
  </div>

<!-- ๐ช ูุงุฆูุฉ ุงูููุงูุน -->
<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
  <div
    *ngFor="let pos of filteredPosList"
    class="rounded-2xl shadow-lg border border-gray-200 hover:shadow-xl transition-all duration-200"
  >
    <div class="p-5 flex flex-col h-full">
      <div class="flex justify-between items-center mb-3">
        <h3 class="text-lg font-bold text-gray-800">{{ pos.name }}</h3>
        <span
          class="text-xs px-3 py-1 rounded-full"
          [ngClass]="{
            'bg-green-100 text-green-600': pos.status === 'open',
            'bg-gray-200 text-gray-600': pos.status === 'closed'
          }"
        >
          {{ pos.status === 'open' ? 'ููุชูุญ' : 'ูุบูู' }}
        </span>
      </div>

      <p class="text-sm text-gray-500 mb-1"><strong>ุงููููุน:</strong> {{ pos.location }}</p>
      <p class="text-sm text-gray-500 mb-1"><strong>ุชู ุงููุชุญ ูู:</strong> {{ pos.openedAt }}</p>
      <p class="text-sm text-gray-500 mb-1"><strong>ุงููุณุชุฎุฏู:</strong> {{ pos.user }}</p>
      <p class="text-sm text-gray-500 mb-3"><strong>ุทุฑู ุงูุฏูุน:</strong> {{ pos.paymentMethods }}</p>

      <!-- ุฃุฒุฑุงุฑ ุงููุชุงุจุนุฉ ูุงูุฅุบูุงู -->
      <div class="flex flex-col mt-auto">
        <div class="flex justify-between">
          <button
            pButton
            label="ูุชุงุจุนุฉ ุงูุจูุน"
            icon="pi pi-shopping-cart"
            class="p-button-primary p-button-rounded px-4"
            (click)="continueSale(pos)"
          ></button>

          <button
            pButton
            label="ุฅุบูุงู ุงูุตูุฏูู"
            icon="pi pi-lock"
            class="p-button-danger p-button-rounded px-4"
            (click)="attemptClosePos(pos)"
          ></button>
        </div>

        <!-- ุญุงููุฉ ุซุงุจุชุฉ ููุฑุณุงูุฉ ููุชุญูู ูู ุงุฑุชูุงุน ุงูุจุทุงูุฉ -->
        <div class="mt-2 min-h-[20px]">
          <p
            [class.invisible]="!pos.showCloseWarning"
            class="text-xs text-red-500 text-center w-full"
          >
            โ ูุง ูููู ุงูุฅุบูุงู โ ุงูุตูุฏูู ููุชูุญ ุนูู ุฌูุงุฒ ุขุฎุฑ.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- ๐งพ ูุงูุฐุฉ ุฅุถุงูุฉ ุตูุฏูู ุจูุน ุฌุฏูุฏ -->
  <p-dialog
    header="ุฅุถุงูุฉ ุตูุฏูู ุจูุน ุฌุฏูุฏ"
    [(visible)]="addDialogVisible"
    [modal]="true"
    [closable]="true"
    [draggable]="false"
    [resizable]="false"
    [style]="{ width: '450px' }"
  >
    <div class="p-fluid space-y-4">
      <div class="field">
        <label class="font-semibold mb-2 block">ุงุณู ุงูุตูุฏูู</label>
        <input
          type="text"
          pInputText
          placeholder="ุฃุฏุฎู ุงุณู ุงูุตูุฏูู"
          [(ngModel)]="newPos.name"
          class="w-full"
        />
      </div>

      <div class="field">
        <label class="font-semibold mb-2 block">ุงููููุน</label>
        <input
          type="text"
          pInputText
          placeholder="ูุซูุงู: ูุฑุน ุงูุฑูุงุถ"
          [(ngModel)]="newPos.location"
          class="w-full"
        />
      </div>

      <div class="field">
        <label class="font-semibold mb-2 block">ุทุฑู ุงูุฏูุน</label>
        <input
          type="text"
          pInputText
          placeholder="ูุซูุงู: ููุฏูุ ูุฏูุ ุชุญููู"
          [(ngModel)]="newPos.paymentMethods"
          class="w-full"
        />
      </div>

      <div class="flex justify-end gap-2 pt-4 border-t">
        <button
          pButton
          label="ุฅูุบุงุก"
          icon="pi pi-times"
          class="p-button-text text-gray-600 hover:text-red-500"
          (click)="addDialogVisible = false"
        ></button>
        <button
          pButton
          label="ุญูุธ"
          icon="pi pi-check"
          class="p-button-success"
          (click)="saveNewPos()"
        ></button>
      </div>
    </div>
  </p-dialog>

</div>
